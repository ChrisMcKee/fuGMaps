/* =========================================================
// jquery.fuGMAP.min.js 0.0.3.2
// Copyright Chris McKee <pcdevils[at]gmail.com> 2010
// chrismckee.co.uk // http://bit.ly/fuGMAP
// Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
// ========================================================= */
(function(i){var n=new GClientGeocoder;i.fn.fuGMAP=function(g){var a=i.extend({},{latitude:55.378051,longitude:-3.435973,address:"",url:"",zoom:7,markerxml:"",kmlfile:"",markers:[],controls:[],maptype:"G_NORMAL_MAP",scrollwheel:true,popup:"iframe",icon:{image:"http://www.google.com/mapfiles/marker.png",shadow:"http://www.google.com/mapfiles/shadow50.png",iconsize:"",shadowsize:"",iconanchor:"",infowindowanchor:""},fudebug:false},g),d,h;new GLatLngBounds;if(!window.GBrowserIsCompatible||!GBrowserIsCompatible())return this;
return this.each(function(){d=new GMap2(this);d.setMapType(eval(a.maptype));d.setCenter(new GLatLng(a.latitude,a.longitude),a.zoom);h=d.getBounds();var e=new GIcon(G_DEFAULT_ICON);if(a.icon.image)e.image=a.icon.image;if(a.icon.shadow)e.shadow=a.icon.shadow;if(l(a.icon.iconsize))e.iconSize=new GSize(a.icon.iconsize[0],a.icon.iconsize[1]);if(l(a.icon.shadowsize))e.shadowSize=new GSize(a.icon.shadowsize[0],a.icon.shadowsize[1]);if(l(a.icon.iconanchor))e.iconAnchor=new GPoint(a.icon.iconanchor[0],a.icon.iconanchor[1]);
var c=a.controls.length;if(a.controls.length==0)d.setUIToDefault();else for(;c--;)eval("eMap.addControl(new "+a.controls[c]+"());");a.scrollwheel==true&&a.controls.length!==0&&d.enableScrollWheelZoom();for(c=0;c<a.markers.length;c++){var b=a.markers[c];if(b.longitude&&b.latitude){var f=new GPoint(b.longitude,b.latitude);gMarker=new GMarker(f,e);if(b.url){var j=a.popup==="iframe"?"<iframe frameborder='0' hspace='0' src='"+b.url+"' id='tb_iframecontent' name='tb_iframecontent'/>":'<div class="gmap_marker" id="gmap-popup">'+
b.url+"</div>";GEvent.addListener(gMarker,"click",function(){gMarker.openInfoWindowHtml(j)})}if(gMarker){d.addOverlay(gMarker);d.setCenter(f,a.zoom)}}b.address&&i.fn.fuGMAP.geocodeAddress(b.address,n,d,h,e,b.url,a.popup,a.zoom,a.fudebug)}a.markerxml&&i.fn.fuGMAP.MarkerXML(a.markerxml,d,h,e,a.popup,a.zoom)})};i.fn.fuGMAP.geocodeAddress=function(g,a,d,h,e,c,b,f,j){a&&a.getLatLng(g,function(m){if(m){var k=new GMarker(m,e);if(c){var o=b==="iframe"?"<iframe frameborder='0' hspace='0' src='"+c+"' id='tb_iframecontent' name='tb_iframecontent'/>":
'<div class="gmap_marker" id="gmap-popup">'+c+"</div>";GEvent.addListener(k,"click",function(){k.openInfoWindowHtml(o)})}if(k){d.setCenter(m,f);d.addOverlay(k)}return k?true:false}else try{console.log(g+" not found")}catch(p){j&&alert(g+" not found")}})};i.fn.fuGMAP.MarkerXML=function(g,a,d,h,e,c){GDownloadUrl(g,function(b){b=GXml.parse(b).documentElement.getElementsByTagName("marker");for(var f=0;f<b.length;f++)a.addOverlay(i.fn.fuGMAP.CreateMarker(a,c,h,b[f].getAttribute("lat"),b[f].getAttribute("lng"),
b[f].getAttribute("html"),e))})};i.fn.fuGMAP.CreateMarker=function(g,a,d,h,e,c,b){h=new GLatLng(h,e);var f=new GMarker(h,d);if(b==="iframe"&&!/^http:\/\//.test(c))b="text";if(c){var j=b==="iframe"?"<iframe frameborder='0' hspace='0' src='"+c+"' id='tb_iframecontent' name='tb_iframecontent'/>":'<div class="gmap_marker" id="gmap-popup">'+c+"</div>";GEvent.addListener(f,"click",function(){f.openInfoWindowHtml(j)})}g.setCenter(h,a);return f};var l=function(g){return typeof g=="object"&&g instanceof Array}})(jQuery);